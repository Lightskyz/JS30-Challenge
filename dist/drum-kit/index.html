<!DOCTYPE html ><html lang="en"> <head> <link rel="stylesheet" href="style.min.css"/><meta charset="utf-8"/><title>drum-kit</title></head><body> <div class="keys"><div class="key" data-key="65"><kbd>A</kbd><span class="sound">clap</span></div><div class="key" data-key="83"><kbd>S</kbd><span class="sound">hihat</span></div><div class="key" data-key="68"><kbd>D</kbd><span class="sound">clap</span></div><div class="key" data-key="70"><kbd>F</kbd><span class="sound">kick</span></div><div class="key" data-key="71"><kbd>G</kbd><span class="sound">openhat</span></div><div class="key" data-key="72"><kbd>H</kbd><span class="sound">ride</span></div><div class="key" data-key="74"><kbd>J</kbd><span class="sound">snare</span></div><div class="key" data-key="75"><kbd>K</kbd><span class="sound">tom</span></div><div class="key" data-key="76"><kbd>L</kbd><span class="sound">tink</span></div></div><audio data-key="65" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/clap.wav"></audio><audio data-key="83" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/hihat.wav"></audio><audio data-key="68" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/kick.wav"></audio><audio data-key="70" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/openhat.wav"></audio><audio data-key="71" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/boom.wav"></audio><audio data-key="72" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/ride.wav"></audio><audio data-key="74" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/snare.wav"></audio><audio data-key="75" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/tom.wav"></audio><audio data-key="76" src="https://s3-us-west-2.amazonaws.com/aws-s3-bucket-dev-antoine/sounds/tink.wav"></audio><script type="text/javascript">function removeTransition(e) {
    if (e.propertyName !== 'transform') return; //skip if it's not transform
    console.log(e);
    this.classList.remove('playing');
}

function playSound(e) {
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
    const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
    if (!audio) return; // Stop function from running
    audio.currentTime = 0; // Rewind to the start
    audio.play();
    key.classList.add('playing');
}

const keys = document.querySelectorAll('.key');
keys.forEach(key => key.addEventListener('transitionend', removeTransition));
window.addEventListener('keydown', playSound);</script></body></html>